<!DOCTYPE html>
<html>
<head>
	<!--<script src="/client.js"></script>-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
</head>
<body>
	<!--fb login-->
	<script language="javascript" type="text/javascript">
				  
		function statusChangeCallback(response) {
		    if (response.status === 'connected') {
		      testAPI();
		    } else if (response.status === 'not_authorized') {
		      document.getElementById('status').innerHTML = 'Please log ' +
		        'into this app.';
		    } else {
		      document.getElementById('status').innerHTML = 'Please log ' +
		        'into Facebook.';
		    }
		}

		function checkLoginState() {
		    FB.getLoginStatus(function(response) {
		      statusChangeCallback(response);
		    });
		}

		window.fbAsyncInit = function() {
			FB.init({
			    appId      : '872795129456979',
			    cookie     : true,  // enable cookies to allow the server to access 
			                        // the session
			    xfbml      : true,  // parse social plugins on this page
			    version    : 'v2.2' // use version 2.2
			});

			FB.getLoginStatus(function(response) {
			    statusChangeCallback(response);
			});

		};

		(function(d, s, id) {
		    var js, fjs = d.getElementsByTagName(s)[0];
		    if (d.getElementById(id)) return;
		    js = d.createElement(s); js.id = id;
		    js.src = "//connect.facebook.net/en_US/sdk.js";
		    fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));

		function testAPI() {
		    console.log('Welcome!  Fetching your information.... ');
		    FB.api('/me', function(response) {
		    	console.log(response);
		      	document.getElementById('status').innerHTML =
		        	'Thanks for logging in, ' + response.name + '!';
		    });
		}

	</script>    
    <!--login-->
	Email:<br>
	<input type="text" id="email" value=""><br>
	Password:<br>
	<input type="password" id="password" value=""><br>
	<button type="button" onclick="login()">Log in</button>
	<p id="test"></p>

	<fb:login-button autologoutlink="true"></fb:login-button>

	<div id="status">
</div>
</body>
<script>

	var socket = io.connect("http://localhost:8000");

	socket.on("message",function(message){
		console.log(message);
	});

	function login(){
		var email = document.getElementById("email").value;
		var password = document.getElementById("password").value;
		var login={
			email:email,
			password:password
		};
		socket.emit("login", login);
	}
</script>
</html>
